import{R as I,r as y,j as a,M as w,N as C,O as K}from"./index-Cp2WuUxC.js";import{X as E}from"./index-CSb-BAbw.js";const H=e=>{let t;const n=new Set,o=(c,f)=>{const v=typeof c=="function"?c(t):c;if(!Object.is(v,t)){const g=t;t=f??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(m=>m(t,g))}},i=()=>t,d={setState:o,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(o,i,d);return d},X=e=>e?H(e):H,$=e=>e;function F(e,t=$){const n=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(n),n}const O=e=>{const t=X(e),n=o=>F(t,o);return Object.assign(n,t),n},L=e=>e?O(e):O;function z(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var r;const h=u=>u===null?null:JSON.parse(u,void 0),d=(r=n.getItem(i))!=null?r:null;return d instanceof Promise?d.then(h):h(d)},setItem:(i,r)=>n.setItem(i,JSON.stringify(r,void 0)),removeItem:i=>n.removeItem(i)}}const _=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(o){return _(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return _(o)(n)}}}},B=(e,t)=>(n,o,i)=>{let r={storage:z(()=>localStorage),partialize:s=>s,version:0,merge:(s,p)=>({...p,...s}),...t},h=!1;const d=new Set,u=new Set;let c=r.storage;if(!c)return e((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...s)},o,i);const f=()=>{const s=r.partialize({...o()});return c.setItem(r.name,{state:s,version:r.version})},v=i.setState;i.setState=(s,p)=>{v(s,p),f()};const g=e((...s)=>{n(...s),f()},o,i);i.getInitialState=()=>g;let m;const N=()=>{var s,p;if(!c)return;h=!1,d.forEach(l=>{var S;return l((S=o())!=null?S:g)});const x=((p=r.onRehydrateStorage)==null?void 0:p.call(r,(s=o())!=null?s:g))||void 0;return _(c.getItem.bind(c))(r.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==r.version){if(r.migrate)return[!0,r.migrate(l.state,l.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var S;const[R,T]=l;if(m=r.merge(T,(S=o())!=null?S:g),n(m,!0),R)return f()}).then(()=>{x==null||x(m,void 0),m=o(),h=!0,u.forEach(l=>l(m))}).catch(l=>{x==null||x(void 0,l)})};return i.persist={setOptions:s=>{r={...r,...s},s.storage&&(c=s.storage)},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>N(),hasHydrated:()=>h,onHydrate:s=>(d.add(s),()=>{d.delete(s)}),onFinishHydration:s=>(u.add(s),()=>{u.delete(s)})},r.skipHydration||N(),m||g},J=B,P=L(J(e=>({theme:"light",toggleTheme:()=>e(t=>({theme:t.theme==="light"?"dark":"light"}))}),{name:"theme"})),A="header__cAKp4",k={header:A},M=()=>{const{theme:e,toggleTheme:t}=P();y.useLayoutEffect(()=>{document.documentElement.toggleAttribute("dark",e==="dark")},[e]);const n=y.useCallback(()=>{t()},[t]);return a.jsxs("div",{className:k.header,children:[a.jsx("div",{className:k.logo,children:"X"}),a.jsx("div",{className:"text-2xl",onClick:n,children:e==="light"?"🌞":"🌚"})]})},D="side__zNXE4",j={side:D,"side-button":"side-button__KKKYj","side-button-wrapper":"side-button-wrapper__bneHK"},G=e=>{const{type:t,children:n}=e;return t===w.Creator?a.jsx("div",{className:j["side-button-wrapper"],children:a.jsx(E,{className:j["side-button"],icon:t,iconSize:24,children:n})}):a.jsx("div",{className:j["side-button-wrapper"],children:a.jsx(C,{to:`/${t}`,children:({isActive:o})=>a.jsx(E,{className:j["side-button"],active:o,icon:t,iconSize:24,children:n})})})},U=y.memo(()=>a.jsx("div",{className:j.side,children:a.jsx(G,{type:w.Explore,children:"发现"})})),Y="home__3ynzF",q="header__lVpd-",Q="main__6jGPN",W="aside__e00Xz",Z="content__nmV9O",b={home:Y,header:q,main:Q,aside:W,content:Z},te=()=>a.jsxs("div",{className:b.home,children:[a.jsx("div",{className:b.header,children:a.jsx(M,{})}),a.jsxs("div",{className:b.main,children:[a.jsx("div",{className:b.aside,children:a.jsx(U,{})}),a.jsx(y.Suspense,{children:a.jsx("div",{className:b.content,children:a.jsx(K,{})})})]})]});export{te as default};

import{R as e,r as t,j as n,M as s,N as r,O as a}from"./index-IhTL_ylY.js";import{X as i}from"./index-ZrI31w4I.js";const o=e=>{let t;const n=new Set,s=(e,s)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,a={setState:s,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(s,r,a);return a},c=e=>e;const l=t=>{const n=(e=>e?o(e):o)(t),s=t=>function(t,n=c){const s=e.useSyncExternalStore(t.subscribe,(()=>n(t.getState())),(()=>n(t.getInitialState())));return e.useDebugValue(s),s}(n,t);return Object.assign(s,n),s};function d(e,t){let n;try{n=e()}catch(s){return}return{getItem:e=>{var t;const s=e=>null===e?null:JSON.parse(e,void 0),r=null!=(t=n.getItem(e))?t:null;return r instanceof Promise?r.then(s):s(r)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const m=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>m(e)(n),catch(e){return this}}}catch(n){return{then(e){return this},catch:e=>m(e)(n)}}},u=(h=((e,t)=>(n,s,r)=>{let a={storage:d((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,c=new Set;let l=a.storage;if(!l)return e(((...e)=>{n(...e)}),s,r);const u=()=>{const e=a.partialize({...s()});return l.setItem(a.name,{state:e,version:a.version})},h=r.setState;r.setState=(e,t)=>{h(e,t),u()};const g=e(((...e)=>{n(...e),u()}),s,r);let v;r.getInitialState=()=>g;const j=()=>{var e,t;if(!l)return;i=!1,o.forEach((e=>{var t;return e(null!=(t=s())?t:g)}));const r=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=s())?e:g))||void 0;return m(l.getItem.bind(l))(a.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate)return[!0,a.migrate(e.state,e.version)]}return[!1,void 0]})).then((e=>{var t;const[r,i]=e;if(v=a.merge(i,null!=(t=s())?t:g),n(v,!0),r)return u()})).then((()=>{null==r||r(v,void 0),v=s(),i=!0,c.forEach((e=>e(v)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{a={...a,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||j(),v||g})((e=>({theme:"light",toggleTheme:()=>e((e=>({theme:"light"===e.theme?"dark":"light"})))})),{name:"theme"}))?l(h):l;var h;const g={header:"header__cAKp4"},v=()=>{const{theme:e,toggleTheme:s}=u();t.useLayoutEffect((()=>{document.documentElement.toggleAttribute("dark","dark"===e)}),[e]);const r=t.useCallback((()=>{s()}),[s]);return n.jsxs("div",{className:g.header,children:[n.jsx("div",{className:g.logo,children:"X"}),n.jsx("div",{className:"text-2xl",onClick:r,children:"light"===e?"🌞":"🌚"})]})},j="side__zNXE4",x="side-button__KKKYj",f="side-button-wrapper__bneHK",p=e=>{const{type:t,children:a}=e;return t===s.Creator?n.jsx("div",{className:f,children:n.jsx(i,{className:x,icon:t,iconSize:24,children:a})}):n.jsx("div",{className:f,children:n.jsx(r,{to:`/${t}`,children:({isActive:e})=>n.jsx(i,{className:x,active:e,icon:t,iconSize:24,children:a})})})},S=t.memo((()=>n.jsx("div",{className:j,children:n.jsx(p,{type:s.Explore,children:"发现"})}))),N="home__3ynzF",_="header__lVpd-",y="main__6jGPN",b="aside__e00Xz",I="content__nmV9O",O=()=>n.jsxs("div",{className:N,children:[n.jsx("div",{className:_,children:n.jsx(v,{})}),n.jsxs("div",{className:y,children:[n.jsx("div",{className:b,children:n.jsx(S,{})}),n.jsx(t.Suspense,{children:n.jsx("div",{className:I,children:n.jsx(a,{})})})]})]});export{O as default};
